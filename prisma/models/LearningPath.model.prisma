// NÃ­veis de profundidade da trilha
enum LearningPathLevel {
  BASIC
  INTERMEDIATE
  ADVANCED
}

// Tipo de conteÃºdo do passo
// enum LearningContentType {
//   ARTICLE // artigo / texto
//   VIDEO // vÃ­deo
//   TOOL // planilha/ferramenta
//   OTHER
// }

enum LearningContentType {
  ARTICLE
  VIDEO
  TOOL
  QUIZ // ðŸ‘ˆ novo
  OTHER
}

// model LearningPath {
//   id          String @id @default(cuid())
//   slug        String @unique
//   title       String
//   description String

//   // Usa o enum que jÃ¡ temos do EPIC 2
//   dimension FinancialDimension

//   level            LearningPathLevel @default(BASIC)
//   estimatedMinutes Int?
//   isActive         Boolean           @default(true)
//   order            Int               @default(0)

//   steps LearningStep[]

//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
// }

model LearningPath {
  id          String @id @default(cuid())
  slug        String @unique
  title       String
  description String

  dimension FinancialDimension

  level            LearningPathLevel @default(BASIC)
  estimatedMinutes Int?
  imageUrl         String? // ðŸ‘ˆ novo
  totalSteps       Int? // ðŸ‘ˆ novo (pode ser preenchido no seed)
  isActive         Boolean           @default(true)
  order            Int               @default(0)

  steps LearningStep[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model LearningStep {
  id             String @id @default(cuid())
  learningPathId String

  learningPath LearningPath @relation(fields: [learningPathId], references: [id], onDelete: Cascade)

  order            Int
  title            String
  type             LearningContentType
  xpContentUrl     String?
  estimatedMinutes Int?

  // ðŸ‘‡ se for um passo do tipo QUIZ, aponta pra QuizContent
  quizContentId String?      @unique
  quizContent   QuizContent? @relation(fields: [quizContentId], references: [id])

  progress UserLearningStepProgress[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UserLearningStepProgress {
  id             String @id @default(cuid())
  userXPId       String
  learningStepId String

  userXP       UserXP       @relation(fields: [userXPId], references: [id], onDelete: Cascade)
  learningStep LearningStep @relation(fields: [learningStepId], references: [id], onDelete: Cascade)

  completedAt DateTime @default(now())

  @@unique([userXPId, learningStepId])
}
